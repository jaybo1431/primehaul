{% extends "base.html" %}

{% block content %}
  <!-- Voice guidance for this page -->
  <div id="voiceGuidance" data-message="Now let's photograph your rooms. Tap on each room that has items you're moving. For example, tap Living Room, then take photos. You can add as many rooms as you need. When you've done all rooms, tap Done at the bottom." hidden></div>

  <div class="largetitle">Select rooms</div>
  <p class="subtitle">Tap rooms to scan them</p>

  <div class="group">
    <div class="chipgrid">
      {% set room_icons = {
        "Living room": "ğŸ›‹ï¸",
        "Bed 1": "ğŸ›ï¸",
        "Bed 2": "ğŸ›ï¸",
        "Bed 3": "ğŸ›ï¸",
        "Bed 4": "ğŸ›ï¸",
        "Bed 5": "ğŸ›ï¸",
        "Kitchen": "ğŸ³",
        "Bathroom": "ğŸš¿",
        "Dining room": "ğŸ½ï¸",
        "Hallway": "ğŸšª",
        "Office": "ğŸ’¼",
        "Garage": "ğŸš—",
        "Loft": "ğŸ“¦",
        "Garden": "ğŸŒ³",
        "Other": "â•"
      } %}
      {% for opt in ["Living room","Bed 1","Bed 2","Bed 3","Bed 4","Bed 5","Kitchen","Bathroom","Dining room","Hallway","Office","Garage","Loft","Garden","Other"] %}
        <form method="post" action="/s/{{ company_slug }}/{{ token }}/rooms/add">
          <input type="hidden" name="room_name" value="{{ opt }}" />
          <button class="chip" type="submit">{{ room_icons[opt] }} {{ opt }}</button>
        </form>
      {% endfor %}
    </div>

  </div>

  {% if rooms and rooms|length > 0 %}
    <div class="group">
      <div class="rowhead">
        <div class="rowtitle">Rooms added</div>
        <div class="rowsub">{{ rooms|length }}</div>
      </div>

      <div class="invlist">
        {% for r in rooms %}
          <a class="invlink" href="/s/{{ company_slug }}/{{ token }}/room/{{ r.id }}">
            <div class="invtop">
              <div class="invroom">{{ room_icons.get(r.name, "ğŸ“¦") }} {{ r.name }}</div>
              <div class="invmeta">{{ (r.photos|length) if r.photos else 0 }} photos</div>
            </div>
            <div class="invitems">
              {% if r.items and r.items|length > 0 %}
                {{ r.items|length }} items
              {% else %}
                <span class="muted">Tap to scan</span>
              {% endif %}
            </div>
          </a>
        {% endfor %}
      </div>
    </div>
  {% endif %}
{% endblock %}

{% block footer %}
  <div class="footer footer-clean">
    <div class="footer-inner">
      {% if rooms and rooms|length > 0 %}
        <a class="btn" href="/s/{{ company_slug }}/{{ token }}/quote-preview">See Quote</a>
      {% else %}
        <button class="btn" style="opacity:.55; pointer-events:none;">Select rooms first</button>
      {% endif %}
    </div>
  </div>
{% endblock %}
