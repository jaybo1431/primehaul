<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billing & Subscription - PrimeHaul OS</title>
    <link rel="stylesheet" href="/static/app.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>{{ company.company_name }}</h1>
            <p class="subtitle">Billing & Subscription</p>
        </div>

        <div class="card fade-in">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2>Subscription Status</h2>
                <a href="/{{ company_slug }}/admin/dashboard" class="btn" style="background: #555; color: #fff;">
                    Back to Dashboard
                </a>
            </div>

            {% if subscription_info.status == 'trial' %}
            <div class="alert" style="background: rgba(46, 229, 157, 0.1); border-left: 4px solid #2ee59d;">
                <h3 style="margin: 0 0 8px 0; color: #2ee59d;">Free Trial Active</h3>
                <p style="margin: 0; color: #aaa;">
                    {{ subscription_info.days_remaining }} days remaining in your 14-day trial.
                    Subscribe now to continue after trial ends.
                </p>
            </div>

            <div style="margin-top: 24px;">
                <h3 style="margin-bottom: 12px;">PrimeHaul OS Professional - £99/month</h3>
                <ul style="color: #aaa; line-height: 1.8; margin-bottom: 24px;">
                    <li>Unlimited AI-powered quotes</li>
                    <li>Unlimited photo analysis</li>
                    <li>Custom branding & pricing</li>
                    <li>Multi-user team accounts</li>
                    <li>Full analytics dashboard</li>
                    <li>Email & phone support</li>
                </ul>

                <form method="POST" action="/{{ company_slug }}/billing/create-checkout">
                    <button type="submit" class="btn btn-primary btn-block">
                        Subscribe Now - £99/month
                    </button>
                </form>
            </div>
            {% elif subscription_info.status == 'active' %}
            <div class="alert" style="background: rgba(46, 229, 157, 0.1); border-left: 4px solid #2ee59d;">
                <h3 style="margin: 0 0 8px 0; color: #2ee59d;">Subscription Active</h3>
                <p style="margin: 0; color: #aaa;">
                    Your subscription is active. You have unlimited access to all features.
                </p>
            </div>

            <div style="margin-top: 24px;">
                <h3 style="margin-bottom: 12px;">Current Plan</h3>
                <div style="background: #222; padding: 20px; border-radius: 8px; margin-bottom: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4 style="margin: 0; color: #fff;">PrimeHaul OS Professional</h4>
                            <p style="margin: 8px 0 0 0; color: #888;">Unlimited quotes and features</p>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 32px; font-weight: 700; color: #2ee59d;">£99</div>
                            <div style="color: #888; font-size: 14px;">per month</div>
                        </div>
                    </div>
                </div>

                <form method="POST" action="/{{ company_slug }}/billing/manage">
                    <button type="submit" class="btn btn-block" style="background: #444;">
                        Manage Subscription
                    </button>
                </form>
                <p style="margin-top: 12px; color: #666; font-size: 13px; text-align: center;">
                    Update payment method, view invoices, or cancel subscription
                </p>
            </div>
            {% elif subscription_info.status == 'past_due' %}
            <div class="alert alert-error">
                <h3 style="margin: 0 0 8px 0;">Payment Failed</h3>
                <p style="margin: 0;">
                    Your last payment failed. Please update your payment method to continue using PrimeHaul OS.
                </p>
            </div>

            <div style="margin-top: 24px;">
                <form method="POST" action="/{{ company_slug }}/billing/manage">
                    <button type="submit" class="btn btn-primary btn-block">
                        Update Payment Method
                    </button>
                </form>
            </div>
            {% else %}
            <div class="alert alert-error">
                <h3 style="margin: 0 0 8px 0;">Subscription Required</h3>
                <p style="margin: 0;">
                    Subscribe to PrimeHaul OS to access all features and generate unlimited quotes.
                </p>
            </div>

            <div style="margin-top: 24px;">
                <h3 style="margin-bottom: 12px;">PrimeHaul OS Professional - £99/month</h3>
                <ul style="color: #aaa; line-height: 1.8; margin-bottom: 24px;">
                    <li>Unlimited AI-powered quotes</li>
                    <li>Unlimited photo analysis</li>
                    <li>Custom branding & pricing</li>
                    <li>Multi-user team accounts</li>
                    <li>Full analytics dashboard</li>
                    <li>Email & phone support</li>
                </ul>

                <form method="POST" action="/{{ company_slug }}/billing/create-checkout">
                    <button type="submit" class="btn btn-primary btn-block">
                        Subscribe Now - £99/month
                    </button>
                </form>
            </div>
            {% endif %}
        </div>

        <div style="text-align: center; margin-top: 32px; color: #666; font-size: 13px;">
            <p>&copy; 2025 PrimeHaul OS. All rights reserved.</p>
        </div>
    </div>
</body>
</html>
