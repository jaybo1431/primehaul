<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Branding Settings - PrimeHaul OS</title>
    <link rel="stylesheet" href="/static/app.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>{{ company.company_name }}</h1>
            <p class="subtitle">Branding & Customization</p>
        </div>

        <!-- Onboarding Tips -->
        <div class="card fade-in" id="brandingOnboarding" style="background: linear-gradient(135deg, rgba(46,229,157,.12), rgba(46,229,157,.04)); border: 1px solid rgba(46,229,157,.3); margin-bottom: 24px; position: relative;">
            <button onclick="dismissBrandingTips()" style="position:absolute; top:12px; right:12px; background:none; border:none; color:#888; cursor:pointer; font-size:20px; line-height:1;">&times;</button>
            <div style="font-size: 18px; font-weight: 700; color: #2ee59d; margin-bottom: 12px;">ðŸŽ¨ Make It Your Brand</div>
            <div style="color: #ccc; font-size: 14px; line-height: 1.7;">
                <p style="margin-bottom: 12px;">Customers will see YOUR brand when they fill out surveys - not ours. Here's what to customize:</p>
                <ul style="margin: 0; padding-left: 20px; color: #aaa;">
                    <li><strong style="color:#fff;">Upload Your Logo</strong> - PNG or SVG format works best. This appears on all customer pages</li>
                    <li><strong style="color:#fff;">Primary Color</strong> - Used for buttons and highlights (match your brand color)</li>
                    <li><strong style="color:#fff;">Secondary Color</strong> - Background tints and secondary elements</li>
                </ul>
                <p style="margin-top: 12px; color: #2ee59d;"><strong>Tip:</strong> Use colors from your existing website or van livery for a consistent look!</p>
            </div>
        </div>
        <script>
            function dismissBrandingTips() {
                document.getElementById('brandingOnboarding').style.display = 'none';
                localStorage.setItem('primehaul_branding_tips_dismissed', 'true');
            }
            if (localStorage.getItem('primehaul_branding_tips_dismissed') === 'true') {
                document.getElementById('brandingOnboarding').style.display = 'none';
            }
        </script>

        <div class="card fade-in">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2>Brand Settings</h2>
                <a href="/{{ company_slug }}/admin/dashboard" class="btn" style="background: #555; color: #fff;">
                    Back to Dashboard
                </a>
            </div>

            {% if success %}
            <div class="alert" style="background: rgba(46, 229, 157, 0.1); border-left: 4px solid #2ee59d; margin-bottom: 24px;">
                <p style="margin: 0; color: #2ee59d;">
                    âœ“ Branding settings updated successfully
                </p>
            </div>
            {% endif %}

            {% if error %}
            <div class="alert alert-error">
                {{ error }}
            </div>
            {% endif %}

            <!-- Logo Upload -->
            <div style="margin-bottom: 32px; padding-bottom: 32px; border-bottom: 1px solid #333;">
                <h3 style="margin-bottom: 16px;">Company Logo</h3>
                <p style="color: #888; margin-bottom: 16px;">
                    Upload your company logo to appear on customer quotes and surveys.
                    Recommended: PNG or SVG, max 2MB
                </p>

                <div style="display: flex; align-items: center; gap: 24px; margin-bottom: 16px;">
                    <div style="width: 120px; height: 120px; background: #222; border-radius: 8px; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                        {% if company.logo_url %}
                        <img src="{{ company.logo_url }}" alt="Company Logo" style="max-width: 100%; max-height: 100%; object-fit: contain;">
                        {% else %}
                        <span style="color: #666; font-size: 14px;">No logo</span>
                        {% endif %}
                    </div>

                    <form method="POST" action="/{{ company_slug }}/admin/branding/upload-logo" enctype="multipart/form-data" style="flex: 1;">
                        <div class="form-group" style="margin-bottom: 12px;">
                            <input
                                type="file"
                                name="logo"
                                accept="image/png,image/jpeg,image/svg+xml"
                                required
                                style="display: block; width: 100%; padding: 8px; background: #222; border: 1px solid #444; border-radius: 4px; color: #fff;"
                            >
                        </div>
                        <button type="submit" class="btn btn-primary">
                            Upload Logo
                        </button>
                    </form>
                </div>
            </div>

            <!-- Color Customization -->
            <div style="margin-bottom: 32px;">
                <h3 style="margin-bottom: 16px;">Brand Colors</h3>
                <p style="color: #888; margin-bottom: 16px;">
                    Customize your brand colors to match your company identity.
                    These colors will appear throughout customer surveys.
                </p>

                <form method="POST" action="/{{ company_slug }}/admin/branding/update-colors" class="form">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">
                        <div class="form-group">
                            <label for="primary_color">Primary Color</label>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <input
                                    type="color"
                                    id="primary_color"
                                    name="primary_color"
                                    value="{{ company.primary_color or '#2ee59d' }}"
                                    style="width: 60px; height: 40px; border: none; border-radius: 4px; cursor: pointer;"
                                >
                                <input
                                    type="text"
                                    value="{{ company.primary_color or '#2ee59d' }}"
                                    pattern="^#[0-9A-Fa-f]{6}$"
                                    placeholder="#2ee59d"
                                    style="flex: 1;"
                                    id="primary_color_hex"
                                >
                            </div>
                            <small style="color: #666; font-size: 12px;">
                                Used for buttons, links, and accents
                            </small>
                        </div>

                        <div class="form-group">
                            <label for="secondary_color">Secondary Color</label>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <input
                                    type="color"
                                    id="secondary_color"
                                    name="secondary_color"
                                    value="{{ company.secondary_color or '#1a1a1a' }}"
                                    style="width: 60px; height: 40px; border: none; border-radius: 4px; cursor: pointer;"
                                >
                                <input
                                    type="text"
                                    value="{{ company.secondary_color or '#1a1a1a' }}"
                                    pattern="^#[0-9A-Fa-f]{6}$"
                                    placeholder="#1a1a1a"
                                    style="flex: 1;"
                                    id="secondary_color_hex"
                                >
                            </div>
                            <small style="color: #666; font-size: 12px;">
                                Used for backgrounds and secondary elements
                            </small>
                        </div>
                    </div>

                    <!-- Preview -->
                    <div style="background: #222; padding: 24px; border-radius: 8px; margin-bottom: 24px;">
                        <h4 style="margin: 0 0 16px 0; color: #aaa; font-size: 14px; text-transform: uppercase;">Preview</h4>
                        <div id="preview" style="padding: 20px; border-radius: 8px; background: var(--preview-secondary, #1a1a1a);">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                                {% if company.logo_url %}
                                <img src="{{ company.logo_url }}" alt="Logo" style="height: 40px;">
                                {% endif %}
                                <h3 style="margin: 0; color: #fff;">{{ company.company_name }}</h3>
                            </div>
                            <button type="button" class="btn" id="preview-btn" style="background: var(--preview-primary, #2ee59d); color: #000; cursor: default;">
                                Sample Button
                            </button>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-block">
                        Save Brand Colors
                    </button>
                </form>
            </div>
        </div>

        <div style="text-align: center; margin-top: 32px; color: #666; font-size: 13px;">
            <p>&copy; 2026 PrimeHaul â€” An intelligent move.</p>
        </div>
    </div>

    <script>
        // Sync color picker with hex input
        const primaryColorPicker = document.getElementById('primary_color');
        const primaryColorHex = document.getElementById('primary_color_hex');
        const secondaryColorPicker = document.getElementById('secondary_color');
        const secondaryColorHex = document.getElementById('secondary_color_hex');
        const preview = document.getElementById('preview');
        const previewBtn = document.getElementById('preview-btn');

        primaryColorPicker.addEventListener('input', function() {
            primaryColorHex.value = this.value;
            updatePreview();
        });

        primaryColorHex.addEventListener('input', function() {
            if (/^#[0-9A-Fa-f]{6}$/.test(this.value)) {
                primaryColorPicker.value = this.value;
                updatePreview();
            }
        });

        secondaryColorPicker.addEventListener('input', function() {
            secondaryColorHex.value = this.value;
            updatePreview();
        });

        secondaryColorHex.addEventListener('input', function() {
            if (/^#[0-9A-Fa-f]{6}$/.test(this.value)) {
                secondaryColorPicker.value = this.value;
                updatePreview();
            }
        });

        function updatePreview() {
            preview.style.setProperty('--preview-primary', primaryColorPicker.value);
            preview.style.setProperty('--preview-secondary', secondaryColorPicker.value);
            preview.style.background = secondaryColorPicker.value;
            previewBtn.style.background = primaryColorPicker.value;
        }

        // Initialize preview
        updatePreview();
    </script>
</body>
</html>
